{
  "id": "com.obsproject.Studio.Plugin.LiveStreamSegmenter",
  "branch": "stable",
  "runtime": "com.obsproject.Studio",
  "runtime-version": "stable",
  "sdk": "org.kde.Sdk//6.8",
  "build-extension": true,
  "separate-locales": false,
  "build-options": {
    "prefix": "/app/plugins/LiveStreamSegmenter",
    "env": {
      "PKG_CONFIG_PATH": "/app/plugins/LiveStreamSegmenter/lib/pkgconfig:/app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig"
    }
  },
  "modules": [
    {
      "name": "libsecret",
      "buildsystem": "meson",
      "config-opts": [
        "-Dmanpage=false",
        "-Dvapi=false",
        "-Dgtk_doc=false",
        "-Dintrospection=false"
      ],
      "cleanup": [
        "/bin",
        "/include",
        "/lib/pkgconfig",
        "/share/man"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/libsecret/0.21/libsecret-0.21.7.tar.xz",
          "sha256": "6b452e4750590a2b5617adc40026f28d2f4903de15f1250e1d1c40bfd68ed55e"
        }
      ]
    },
    {
      "name": "nlohmann-json",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_INSTALL_INCLUDEDIR=include",
        "-DJSON_BuildTests=OFF"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/nlohmann/json.git",
          "tag": "v3.12.0",
          "commit": "55f93686c01528224f448c19128836e7df245f72"
        }
      ]
    },
    {
      "name": "quickjs-ng",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_INSTALL_INCLUDEDIR=include"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/quickjs-ng/quickjs.git",
          "tag": "v0.11.0",
          "commit": "6a9fe9af5ca0bf7c49ae697edef44864272317d1"
        }
      ]
    },
    {
      "name": "qtkeychain",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_INSTALL_INCLUDEDIR=include",
        "-DBUILD_WITH_QT6=ON",
        "-DBUILD_TRANSLATIONS=OFF",
        "-DBUILD_TESTING=OFF"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/frankosterfeld/qtkeychain.git",
          "tag": "0.15.0",
          "commit": "ad7344c45a86a4f66cbafc4b081b5f7b876cb0b7"
        }
      ]
    },
    {
      "name": "qcoro",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_INSTALL_INCLUDEDIR=include",
        "-DQCORO_BUILD_EXAMPLES=OFF",
        "-DQCORO_BUILD_TESTING=OFF",
        "-DQCORO_WITH_QTDBUS=OFF",
        "-DQCORO_WITH_QTNETWORK=OFF",
        "-DQCORO_WITH_QTWEBSOCKETS=OFF",
        "-DQCORO_WITH_QTQUICK=OFF",
        "-DQCORO_WITH_QML=OFF",
        "-DQCORO_WITH_QTTEST=OFF"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/qcoro/qcoro.git",
          "tag": "v0.12.0",
          "commit": "ef1231ae490465b4f592ca326eee6d56a3d802ae"
        }
      ]
    },
    {
      "name": "live-stream-segmenter",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DCMAKE_PREFIX_PATH=/app/plugins/LiveStreamSegmenter"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/kaito-tokyo/live-stream-segmenter.git",
          "tag": "1.1.0",
          "commit": "b8a25ee522abf9d8a115cfb688dddc9292773bbd",
          "x-checker-data": {
            "type": "git",
            "tag-pattern": "^([\\d.]+)$"
          }
        },
        {
          "type": "file",
          "path": "com.obsproject.Studio.Plugin.LiveStreamSegmenter.metainfo.xml"
        }
      ],
      "post-install": [
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo ${FLATPAK_BUILDER_BUILDDIR}/${FLATPAK_ID}.metainfo.xml"
      ]
    }
  ],
  "cleanup": [
    "/include",
    "/lib/cmake",
    "/lib/pkgconfig"
  ]
}
